<!doctype html>
<html lang="en">
<%- include('../manager/partials/head.ejs') %>
<script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
<!-- Sign in Start -->
<section class="sign-in-page">
    <div class="container p-0" id="sign-in-page-box">
        <div class="bg-white form-container sign-up-container">
            <div class="sign-in-page-data">
                <div class="sign-in-from w-100 m-auto">
                    <h1 class="mb-3 text-center">Inscription</h1>
                    <button style="background: #222F3E; border-radius: 800px; border: none;"x-data @click="$dispatch('notice', {type: 'warning', text: '⚡ Warning'})" type="submit" class="btn btn-primary mb-2">Connexion</button>
                </div>
            </div>
        </div>
        <div class="bg-white form-container sign-in-container">
            <div class="sign-in-page-data">
                <div class="sign-in-from w-100 m-auto">
                    <center>
                        <% if (message) {%>
                            <span class="text-danger"><%- message %></span>
                        <% } %>
                    </center>
                    <p style="color: #222F3E;" class="text-center text-uppercase font-weight-bold">Accès restreint</p>
                    <h3 class="mb-3 text-center">Connexion à l'espace client</h3>
                    <form method="post" action="" class="mt-4">
                        <div class="form-group">
                            <label for="email_login">Adresse courriel</label>
                            <input type="email" name="email" class="form-control mb-0" placeholder="">
                        </div>
                        <div class="form-group">
                            <label for="email_login">Mot de passe</label>
                            <input type="password" name="password" class="form-control mb-0" placeholder="">
                        </div>
                        <div class="d-inline-block w-100">
                            <div class="custom-control custom-checkbox d-inline-block mt-2 pt-1">
                                <input type="checkbox" class="custom-control-input" id="customCheck2">
                                <label class="custom-control-label" for="customCheck1">Se souvenir de moi</label>
                            </div>
                        </div>
                        <div class="sign-info">
                            <button style="background: #222F3E; border-radius: 800px; border: none;"x-data @click="$dispatch('notice', {type: 'warning', text: '⚡ Warning'})" type="submit" class="btn btn-primary mb-2">Connexion</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        <div class="overlay-container">
            <div class="overlay" style="background: #222F3E;">
                <div class="overlay-panel overlay-left">
                    <!--<a class="sign-in-logo mb-5" href="#"><img src="/assets/front/img/logo-light.png" class="img-fluid" alt="logo"></a>-->
                    <button class="btn iq-border-primary mt-2" id="signIn">Connexion</button>
                </div>
                <div class="overlay-panel overlay-right">
                    <!--<a class="sign-in-logo mb-5" href="#"><img src="/assets/front/img/logo-light.png" class="img-fluid" alt="logo"></a>-->
                    <button class="btn iq-border-primary mt-2" id="signUp">Inscription</button>
                </div>
            </div>
        </div>
    </div>

    <div
        x-data="noticesHandler()"

        @notice.window="add($event.detail)"
        style="pointer-events:none">
        <template x-for="notice of notices" :key="notice.id">
            <div
                    x-show="visible.includes(notice)"
                    x-transition:enter="transition ease-in duration-200"
                    x-transition:enter-start="transform opacity-0 translate-y-2"
                    x-transition:enter-end="transform opacity-100"
                    x-transition:leave="transition ease-out duration-500"
                    x-transition:leave-start="transform translate-x-0 opacity-100"
                    x-transition:leave-end="transform translate-x-full opacity-0"
                    @click="remove(notice.id)"
                    class="notification "
                    :class="{
                        'notif-success': notice.type === 'success',
                        'notif-danger': notice.type === 'error',
			        }"
                    style="pointer-events: all"
                    x-text="notice.text">
            </div>
        </template>
    </div>
</section>
<!-- Sign in END -->
<style>
    body {
    background: url("/assets/front/img/bg_blob.svg");
    background-size: 40%;
}
</style>
<%- include('../manager/partials/foot.ejs') %>
<script>
    function noticesHandler() {
        return {
            notices: [],
            visible: [],
            add(notice) {
                notice.id = Date.now()
                this.notices.push(notice)
                this.fire(notice.id)
            },
            fire(id) {
                this.visible.push(this.notices.find(notice => notice.id == id))
                const timeShown = 2000 * this.visible.length
                setTimeout(() => {
                    this.remove(id)
                }, timeShown)
            },
            remove(id) {
                const notice = this.visible.find(notice => notice.id == id)
                const index = this.visible.indexOf(notice)
                this.visible.splice(index, 1)
            },
        }
    }
</script>

<style>
    .notification {
        position: fixed;
        bottom: 30px;
        border-radius: 5px;
        width: 350px;
        cursor: pointer;
        z-index: 10000000 !important;
        transition: 0.3s;
        right: 15px;
        padding-top: 5px;
        padding-left: 1px;
        background: #FFFFFF;
        -webkit-box-shadow: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24);
        box-shadow: 0 1px 3px rgba(160,160,160,0.12), 0 1px 10px rgba(160,160,160,0.2);
        display: flex;
    }

    .notification.notif-danger {
        background: rgba(220, 53, 69, .9);
        color: #FFFFFF;
    }

    .notification.notif-success {
        background: rgba(76, 175, 80, .9);
        color: #FFFFFF;
    }

    .notification .notif-title {
        font-size: 16px;
        font-weight: 550;
    }

    .notification .notif-message {
        font-size: 14px;
        padding-bottom: 5px;
    }
</style>
</body>
</html>
